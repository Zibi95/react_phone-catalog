(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],Array(19).concat([function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return a})),c.d(t,"c",(function(){return r}));var n=function(e){var t;return"".concat(null===e||void 0===e||null===(t=e.at(0))||void 0===t?void 0:t.toUpperCase()).concat(null===e||void 0===e?void 0:e.slice(1))},a=function(e,t,c){var n=e.split("-");return n.splice(t,1,c),n.join("-").toLocaleLowerCase()},r=function(e){return function(t){var c=t.isActive;return"".concat(e).concat(c?" ".concat(e,"--active"):"")}}},function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return r}));var n=c(9),a=function(e){return Object(n.a)({image:e.images[0],category:e.images[0].split("/")[1],price:e.priceDiscount,fullPrice:e.priceRegular,itemId:e.id,year:0},e)},r=function(e){return{Screen:e.screen,Resolution:e.resolution,Processor:e.processor,RAM:e.ram,"Built in memory":e.capacity,Camera:e.camera,Zoom:e.zoom,Cell:e.cell}}},,,,,function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var n=c(5),a=c(0),r=function(e,t){var c=Object(a.useState)((function(){var c=localStorage.getItem(e);return c?JSON.parse(c):t})),r=Object(n.a)(c,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){localStorage.setItem(e,JSON.stringify(s))}),[e,s]),[s,i]}},,function(e,t,c){"use strict";c.d(t,"a",(function(){return j})),c.d(t,"b",(function(){return b}));var n=c(9),a=c(7),r=c(5),s=c(0),i=c(25),o=c(20),u=c(1),l=Object(s.createContext)({cartItems:[],sumPrice:0,itemsCount:0,addCartItem:function(){},deleteCartItem:function(){},changeItemQuantity:function(){}}),j=function(e){var t=e.children,c=Object(i.a)("cart",[]),j=Object(r.a)(c,2),b=j[0],d=j[1],f=Object(s.useCallback)((function(e){var t;t="images"in e?{product:Object(o.b)(e),id:e.id,quantity:1}:{product:e,id:e.itemId,quantity:1},d((function(e){return e.concat(t)}))}),[]),O=Object(s.useCallback)((function(e){d((function(t){return Object(a.a)(t.filter((function(t){return e!==t.id})))}))}),[]),m=Object(s.useCallback)((function(e,t){d((function(c){return c.map((function(c){if(c.id===e){var a=c.quantity+t;return Object(n.a)(Object(n.a)({},c),{},{quantity:a})}return c}))}))}),[]),h=Object(s.useMemo)((function(){return b.reduce((function(e,t){return e+t.product.price*t.quantity}),0)}),[b]),x=Object(s.useMemo)((function(){return b.reduce((function(e,t){return e+t.quantity}),0)}),[b]),v=Object(s.useMemo)((function(){return{cartItems:b,sumPrice:h,itemsCount:x,addCartItem:f,deleteCartItem:O,changeItemQuantity:m}}),[b]);return Object(u.jsx)(l.Provider,{value:v,children:t})},b=function(){return Object(s.useContext)(l)}},function(e,t,c){"use strict";c.d(t,"a",(function(){return l})),c.d(t,"b",(function(){return j}));var n=c(7),a=c(5),r=c(0),s=c(25),i=c(20),o=c(1),u=Object(r.createContext)({favItems:[],addFavItem:function(){},deleteFavItem:function(){}}),l=function(e){var t=e.children,c=Object(s.a)("favorites",[]),l=Object(a.a)(c,2),j=l[0],b=l[1],d=Object(r.useCallback)((function(e){var t=e;"images"in e&&(t=Object(i.b)(e)),b((function(e){return e.concat(t)}))}),[]),f=Object(r.useCallback)((function(e){b((function(t){return Object(n.a)(t.filter((function(t){return e!==t.itemId})))}))}),[]),O=Object(r.useMemo)((function(){return{favItems:j,addFavItem:d,deleteFavItem:f}}),[j]);return Object(o.jsx)(u.Provider,{value:O,children:t})},j=function(){return Object(r.useContext)(u)}},function(e,t,c){"use strict";t.a=c.p+"static/media/heart.33034c1c.svg"},function(e,t,c){"use strict";c.d(t,"a",(function(){return d})),c.d(t,"b",(function(){return f}));var n=c(6),a=c(7),r=c(5),s=c(9),i=c(0),o=c(35),u=c(1),l=Object(i.createContext)(void 0),j=function(e,t){switch(t.type){case"loading":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0});case"products/loaded":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,products:t.payload});case"failed":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}},b={products:{phones:[],tablets:[],accessories:[]},isLoading:!1,error:""},d=function(e){var t=e.children,c=Object(i.useReducer)(j,b),d=Object(r.a)(c,2),f=d[0],O=f.products,m=f.isLoading,h=d[1];Object(i.useEffect)((function(){h({type:"loading"}),Object(o.b)().then((function(e){var t=e.reduce((function(e,t){var c=t.category;return Object(s.a)(Object(s.a)({},e),{},Object(n.a)({},c,[].concat(Object(a.a)(e[c]),[t])))}),{phones:[],tablets:[],accessories:[]});h({type:"products/loaded",payload:t})})).catch((function(e){return h({type:"failed",payload:e})}))}),[]);var x=Object(i.useMemo)((function(){return{products:O,isLoading:m}}),[O,m]);return Object(u.jsx)(l.Provider,{value:x,children:t})},f=function(){return Object(i.useContext)(l)}},function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var n=function(){window.scrollTo({top:0,left:0,behavior:"smooth"})}},function(e,t,c){"use strict";c.d(t,"a",(function(){return a}));c(45);var n=c(1),a=function(e){var t=e.width;return Object(n.jsx)("img",{className:"loader",width:t,src:"img/loader.png",alt:"Loading indicator"})}},function(e,t,c){"use strict";t.a=c.p+"static/media/close.dc88a3f6.svg"},function(e,t,c){},function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return r}));var n=function(e,t){return fetch("https://mate-academy.github.io/react_phone-catalog/_new"+e,{signal:t}).then((function(e){if(!e.ok)throw new Error;return e.json()}))},a=function(){return n("/products.json").then((function(e){return e}))},r=function(e,t){return n("/products/".concat(e,".json"),t)}},,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(36),a=c.n(n),r=c(8),s=c(0),i=c(3),o=c.p+"static/media/logo.28c51025.svg",u=c(1),l=function(){return Object(u.jsx)(r.b,{to:"/",children:Object(u.jsx)("img",{src:o,alt:"Site logo"})})},j=c(29),b=c.p+"static/media/cart.6b81fe9a.svg",d=c(5),f=c.p+"static/media/search.55300699.svg",O=c(33),m=(c(43),function(){var e=Object(r.d)(),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)((function(){return c.get("query")||""})),o=Object(d.a)(a,2),l=o[0],j=o[1],b=Object(i.n)().pathname,m=function(){j(""),c.delete("query"),n(c)};function h(){l?(c.set("query",l),n(c)):m()}return Object(s.useEffect)((function(){var e=setTimeout(h,500);return function(){return clearTimeout(e)}}),[l]),Object(u.jsxs)("label",{className:"search-bar",children:[Object(u.jsx)("input",{className:"search-bar__field",value:l,onChange:function(e){return j(e.target.value)},type:"text",placeholder:"Search in ".concat(b.slice(1),"...")}),l?Object(u.jsx)("button",{"data-cy":"searchDelete",className:"search-bar__button",onClick:m,type:"button",children:Object(u.jsx)("img",{className:"search-bar__icon",src:O.a,alt:"Clear query"})}):Object(u.jsx)("img",{className:"search-bar__icon",src:f,alt:""})]})}),h=c(19),x=(c(34),function(){return Object(u.jsxs)("nav",{className:"nav",children:[Object(u.jsx)("div",{className:"nav__item",children:Object(u.jsx)(l,{})}),Object(u.jsx)("div",{className:"nav__item",children:Object(u.jsx)(r.c,{className:Object(h.c)("nav__link"),to:"/cart",title:"Cart",children:Object(u.jsx)("img",{className:"nav__icon",src:b,alt:"Cart"})})})]})}),v=Object(h.c)("nav__link"),p=["/favorites","/phones","/tablets","/accessories"],_=function(){var e=Object(i.n)().pathname,t=p.includes(e);return"/cart"===e?Object(u.jsx)(x,{}):Object(u.jsxs)("nav",{className:"nav",children:[Object(u.jsxs)("ul",{className:"nav__list",children:[Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(l,{})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:v,to:"/home",title:"Home",children:"Home"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:v,to:"/phones",title:"Phones",children:"Phones"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:v,to:"/tablets",title:"Tablets",children:"Tablets"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:v,to:"/accessories",title:"Accessories",children:"Accessories"})})]}),Object(u.jsxs)("ul",{className:"nav__list nav__list--no-gap",children:[t&&Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(m,{},e)}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:v,to:"/favorites",title:"Favorites",children:Object(u.jsx)("img",{className:"nav__icon",src:j.a,alt:"Favorites"})})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:v,to:"/cart",title:"Cart",children:Object(u.jsx)("img",{className:"nav__icon",src:b,alt:"Cart"})})})]})]})},g=c(31),N=c.p+"static/media/arrow_up.83db57fd.svg",y=(c(44),function(){return Object(u.jsxs)("footer",{className:"footer",children:[Object(u.jsx)(l,{}),Object(u.jsxs)("ul",{className:"footer__list",children:[Object(u.jsx)("li",{className:"footer__item",children:Object(u.jsx)("a",{title:"Github",target:"_blank",href:"https://github.com/Zibi95/react_phone-catalog",className:"footer__link",rel:"noreferrer",children:"Github"})}),Object(u.jsx)("li",{className:"footer__item",children:Object(u.jsx)("a",{href:"#/",className:"footer__link",children:"Contacts"})}),Object(u.jsx)("li",{className:"footer__item",children:Object(u.jsx)("a",{href:"#/",className:"footer__link",children:"Rights"})})]}),Object(u.jsxs)("button",{className:"footer__button",type:"button",onClick:g.a,children:["Back to top",Object(u.jsx)("img",{className:"footer__icon",src:N,alt:""})]})]})}),C=c(27),I=c(28),k=c(30),w=c(32),q=(c(46),function(){return Object(u.jsx)("div",{className:"page-loader",children:Object(u.jsx)(w.a,{width:300})})}),S=(c(47),Object(s.lazy)((function(){return c.e(5).then(c.bind(null,95))}))),L=Object(s.lazy)((function(){return c.e(3).then(c.bind(null,93))})),P=Object(s.lazy)((function(){return c.e(7).then(c.bind(null,96))})),z=Object(s.lazy)((function(){return c.e(6).then(c.bind(null,92))})),F=Object(s.lazy)((function(){return c.e(2).then(c.bind(null,94))})),M=function(){return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(I.a,{children:Object(u.jsxs)(C.a,{children:[Object(u.jsx)("header",{className:"app__header",children:Object(u.jsx)(_,{})}),Object(u.jsx)(k.a,{children:Object(u.jsx)("main",{className:"app__main",children:Object(u.jsx)(s.Suspense,{fallback:Object(u.jsx)(q,{}),children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{index:!0,element:Object(u.jsx)(i.a,{to:"home",replace:!0})}),Object(u.jsx)(i.b,{path:"home",element:Object(u.jsx)(S,{})}),Object(u.jsxs)(i.b,{path:"phones",children:[Object(u.jsx)(i.b,{index:!0,element:Object(u.jsx)(F,{category:"phones"})}),Object(u.jsx)(i.b,{path:":productId",element:Object(u.jsx)(L,{})})]}),Object(u.jsxs)(i.b,{path:"tablets",children:[Object(u.jsx)(i.b,{index:!0,element:Object(u.jsx)(F,{category:"tablets"})}),Object(u.jsx)(i.b,{path:":productId",element:Object(u.jsx)(L,{})})]}),Object(u.jsxs)(i.b,{path:"accessories",children:[Object(u.jsx)(i.b,{index:!0,element:Object(u.jsx)(F,{category:"accessories"})}),Object(u.jsx)(i.b,{path:":productId",element:Object(u.jsx)(L,{})})]}),Object(u.jsx)(i.b,{path:"cart",element:Object(u.jsx)(P,{})}),Object(u.jsx)(i.b,{path:"favorites",element:Object(u.jsx)(z,{})})]})})})}),Object(u.jsx)(y,{})]})})})};c(48);a.a.render(Object(u.jsx)(r.a,{children:Object(u.jsx)(M,{})}),document.getElementById("root"))}]),[[49,1,4]]]);
//# sourceMappingURL=main.eb445c8e.chunk.js.map