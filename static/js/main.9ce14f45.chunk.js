(this["webpackJsonpreact_phone-catalog"]=this["webpackJsonpreact_phone-catalog"]||[]).push([[0],[,,,,,,,,,,,,,,function(e,t,c){"use strict";c.d(t,"a",(function(){return n})),c.d(t,"b",(function(){return a})),c.d(t,"c",(function(){return r}));var n=function(e){var t;return"".concat(null===e||void 0===e||null===(t=e.at(0))||void 0===t?void 0:t.toUpperCase()).concat(null===e||void 0===e?void 0:e.slice(1))},a=function(e,t,c){var n=e.split("-");return n.splice(t,1,c),n.join("-").toLocaleLowerCase()},r=function(e,t){return function(c){var n=c.isActive;return"".concat(e).concat(t||""," ").concat(n?"".concat(e,"--active"):"")}}},,,,,,function(e,t,c){"use strict";c.d(t,"a",(function(){return j})),c.d(t,"b",(function(){return b}));var n=c(9),a=c(7),r=c(5),s=c(0),i=c(27),o=c(22),u=c(1),l=Object(s.createContext)({cartItems:[],sumPrice:0,itemsCount:0,addCartItem:function(){},deleteCartItem:function(){},changeItemQuantity:function(){}}),j=function(e){var t=e.children,c=Object(i.a)("cart",[]),j=Object(r.a)(c,2),b=j[0],d=j[1],O=Object(s.useCallback)((function(e){var t;t="images"in e?{product:Object(o.b)(e),id:e.id,quantity:1}:{product:e,id:e.itemId,quantity:1},d((function(e){return e.concat(t)}))}),[]),f=Object(s.useCallback)((function(e){d((function(t){return Object(a.a)(t.filter((function(t){return e!==t.id})))}))}),[]),m=Object(s.useCallback)((function(e,t){d((function(c){return c.map((function(c){if(c.id===e){var a=c.quantity+t;return Object(n.a)(Object(n.a)({},c),{},{quantity:a})}return c}))}))}),[]),h=Object(s.useMemo)((function(){return b.reduce((function(e,t){return e+t.product.price*t.quantity}),0)}),[b]),x=Object(s.useMemo)((function(){return b.reduce((function(e,t){return e+t.quantity}),0)}),[b]),v=Object(s.useMemo)((function(){return{cartItems:b,sumPrice:h,itemsCount:x,addCartItem:O,deleteCartItem:f,changeItemQuantity:m}}),[b]);return Object(u.jsx)(l.Provider,{value:v,children:t})},b=function(){return Object(s.useContext)(l)}},function(e,t,c){"use strict";c.d(t,"a",(function(){return l})),c.d(t,"b",(function(){return j}));var n=c(7),a=c(5),r=c(0),s=c(27),i=c(22),o=c(1),u=Object(r.createContext)({favItems:[],addFavItem:function(){},deleteFavItem:function(){}}),l=function(e){var t=e.children,c=Object(s.a)("favorites",[]),l=Object(a.a)(c,2),j=l[0],b=l[1],d=Object(r.useCallback)((function(e){var t=e;"images"in e&&(t=Object(i.b)(e)),b((function(e){return e.concat(t)}))}),[]),O=Object(r.useCallback)((function(e){b((function(t){return Object(n.a)(t.filter((function(t){return e!==t.itemId})))}))}),[]),f=Object(r.useMemo)((function(){return{favItems:j,addFavItem:d,deleteFavItem:O}}),[j]);return Object(o.jsx)(u.Provider,{value:f,children:t})},j=function(){return Object(r.useContext)(u)}},function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return r}));var n=c(9),a=function(e){return Object(n.a)({image:e.images[0],category:e.images[0].split("/")[1],price:e.priceDiscount,fullPrice:e.priceRegular,itemId:e.id,year:0},e)},r=function(e){return{Screen:e.screen,Resolution:e.resolution,Processor:e.processor,RAM:e.ram,"Built in memory":e.capacity,Camera:e.camera,Zoom:e.zoom,Cell:e.cell}}},,,,,function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var n=c(5),a=c(0),r=function(e,t){var c=Object(a.useState)((function(){var c=localStorage.getItem(e);return c?JSON.parse(c):t})),r=Object(n.a)(c,2),s=r[0],i=r[1];return Object(a.useEffect)((function(){localStorage.setItem(e,JSON.stringify(s))}),[e,s]),[s,i]}},,function(e,t,c){"use strict";t.a=c.p+"static/media/heart.79446ece.svg"},function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return r}));var n=[window.matchMedia("(max-width: 980px)"),window.matchMedia("(max-width: 760px)")],a=function(){window.scrollY>200&&window.scrollTo({top:0,left:0,behavior:"smooth"})},r=function(){return n[1].matches?2:n[0].matches?3:4}},function(e,t,c){"use strict";c.d(t,"a",(function(){return d})),c.d(t,"b",(function(){return O}));var n=c(6),a=c(7),r=c(5),s=c(9),i=c(0),o=c(35),u=c(1),l=Object(i.createContext)(void 0),j=function(e,t){switch(t.type){case"loading":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!0});case"products/loaded":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,products:t.payload});case"failed":return Object(s.a)(Object(s.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}},b={products:{phones:[],tablets:[],accessories:[]},isLoading:!1,error:""},d=function(e){var t=e.children,c=Object(i.useReducer)(j,b),d=Object(r.a)(c,2),O=d[0],f=O.products,m=O.isLoading,h=O.error,x=d[1];Object(i.useEffect)((function(){x({type:"loading"}),Object(o.b)().then((function(e){var t=e.reduce((function(e,t){var c=t.category;return Object(s.a)(Object(s.a)({},e),{},Object(n.a)({},c,[].concat(Object(a.a)(e[c]),[t])))}),{phones:[],tablets:[],accessories:[]});x({type:"products/loaded",payload:t})})).catch((function(e){return x({type:"failed",payload:e})}))}),[]);var v=Object(i.useMemo)((function(){return{products:f,isLoading:m,error:h}}),[f,m]);return Object(u.jsx)(l.Provider,{value:v,children:t})},O=function(){return Object(i.useContext)(l)}},function(e,t,c){"use strict";c.d(t,"a",(function(){return a}));c(46);var n=c(1),a=function(e){var t=e.width;return Object(n.jsx)("img",{className:"loader",width:t,src:"img/loader.png",alt:"Loading indicator"})}},function(e,t,c){"use strict";t.a=c.p+"static/media/close.dc88a3f6.svg"},function(e,t,c){},function(e,t,c){"use strict";c.d(t,"b",(function(){return a})),c.d(t,"a",(function(){return r}));var n=function(e,t){return fetch("https://mate-academy.github.io/react_phone-catalog/_new"+e,{signal:t}).then((function(e){if(!e.ok)throw new Error("".concat(e.status));return e.json()}))},a=function(){return n("/products.json").then((function(e){return e}))},r=function(e,t){return n("/products/".concat(e,".json"),t)}},function(e,t,c){"use strict";c.d(t,"a",(function(){return r}));var n=c(32),a=(c(47),c(1)),r=function(){return Object(a.jsx)("div",{className:"page-loader",children:Object(a.jsx)(n.a,{width:300})})}},,,,,,,,function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){},function(e,t,c){"use strict";c.r(t);var n=c(37),a=c.n(n),r=c(8),s=c(0),i=c(3),o=c.p+"static/media/logo.28c51025.svg",u=c(1),l=function(){return Object(u.jsx)(r.b,{to:"/",children:Object(u.jsx)("img",{src:o,alt:"Site logo"})})},j=c(29),b=c.p+"static/media/cart.0b1e91b6.svg",d=c(5),O=c.p+"static/media/search.55300699.svg",f=c(33),m=(c(44),function(){var e=Object(r.d)(),t=Object(d.a)(e,2),c=t[0],n=t[1],a=Object(s.useState)((function(){return c.get("query")||""})),o=Object(d.a)(a,2),l=o[0],j=o[1],b=Object(i.n)().pathname,m=function(){j(""),c.delete("query"),n(c)};function h(){l?(c.set("query",l),n(c)):m()}return Object(s.useEffect)((function(){var e=setTimeout(h,500);return function(){return clearTimeout(e)}}),[l]),Object(u.jsxs)("label",{className:"search-bar",children:[Object(u.jsx)("input",{className:"search-bar__field",value:l,onChange:function(e){return j(e.target.value)},type:"text",placeholder:"Search in ".concat(b.slice(1),"...")}),l?Object(u.jsx)("button",{"data-cy":"searchDelete",className:"search-bar__button",onClick:m,type:"button",children:Object(u.jsx)("img",{className:"search-bar__icon",src:f.a,alt:"Clear query"})}):Object(u.jsx)("img",{className:"search-bar__icon",src:O,alt:""})]})}),h=c(14),x=(c(34),function(e){var t=e.cartCount;return Object(u.jsxs)("nav",{className:"nav",children:[Object(u.jsx)("div",{className:"nav__item",children:Object(u.jsx)(l,{})}),Object(u.jsx)("div",{className:"nav__item",children:Object(u.jsxs)(r.c,{className:Object(h.c)("nav__link"," nav__link--icon"),to:"/cart",title:"Cart",children:[Object(u.jsx)("img",{className:"nav__icon",src:b,alt:"Cart"}),Object(u.jsx)("span",{className:"nav__count",children:t})]})})]})}),v=c(20),p=c(21),_=Object(h.c)("nav__link"),g=["/favorites","/phones","/tablets","/accessories"],N=function(){var e=Object(i.n)().pathname,t=g.includes(e),c=Object(v.b)().cartItems,n=Object(p.b)().favItems;return"/cart"===e?Object(u.jsx)(x,{cartCount:c.length}):Object(u.jsxs)("nav",{className:"nav",children:[Object(u.jsxs)("ul",{className:"nav__list",children:[Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(l,{})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:_,to:"/home",title:"Home",children:"Home"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:_,to:"/phones",title:"Phones",children:"Phones"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:_,to:"/tablets",title:"Tablets",children:"Tablets"})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(r.c,{className:_,to:"/accessories",title:"Accessories",children:"Accessories"})})]}),Object(u.jsxs)("ul",{className:"nav__list nav__list--no-gap",children:[t&&Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsx)(m,{},e)}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsxs)(r.c,{className:Object(h.c)("nav__link"," nav__link--icon"),to:"/favorites",title:"Favorites",children:[Object(u.jsx)("img",{className:"nav__icon",src:j.a,alt:"Favorites"}),Object(u.jsx)("span",{className:"nav__count",children:n.length})]})}),Object(u.jsx)("li",{className:"nav__item",children:Object(u.jsxs)(r.c,{className:Object(h.c)("nav__link"," nav__link--icon"),to:"/cart",title:"Cart",children:[Object(u.jsx)("img",{className:"nav__icon",src:b,alt:"Cart"}),Object(u.jsx)("span",{className:"nav__count",children:c.length})]})})]})]})},y=c(30),C=c.p+"static/media/arrow_up.83db57fd.svg",I=(c(45),function(){return Object(u.jsxs)("footer",{className:"footer",children:[Object(u.jsx)(l,{}),Object(u.jsxs)("ul",{className:"footer__list",children:[Object(u.jsx)("li",{className:"footer__item",children:Object(u.jsx)("a",{title:"Github",target:"_blank",href:"https://github.com/Zibi95/react_phone-catalog",className:"footer__link",rel:"noreferrer",children:"Github"})}),Object(u.jsx)("li",{className:"footer__item",children:Object(u.jsx)("a",{href:"#/",className:"footer__link",children:"Contacts"})}),Object(u.jsx)("li",{className:"footer__item",children:Object(u.jsx)("a",{href:"#/",className:"footer__link",children:"Rights"})})]}),Object(u.jsxs)("button",{className:"footer__button",type:"button",onClick:y.b,children:["Back to top",Object(u.jsx)("img",{className:"footer__icon",src:C,alt:""})]})]})}),k=c(31),w=c(36),q=(c(48),Object(s.lazy)((function(){return c.e(4).then(c.bind(null,100))}))),P=Object(s.lazy)((function(){return c.e(2).then(c.bind(null,98))})),S=Object(s.lazy)((function(){return c.e(7).then(c.bind(null,101))})),L=Object(s.lazy)((function(){return c.e(6).then(c.bind(null,97))})),M=Object(s.lazy)((function(){return c.e(3).then(c.bind(null,99))})),z=Object(s.lazy)((function(){return c.e(8).then(c.bind(null,71))})),F=function(){return Object(u.jsx)("div",{className:"app",children:Object(u.jsx)(p.a,{children:Object(u.jsxs)(v.a,{children:[Object(u.jsx)("header",{className:"app__header",children:Object(u.jsx)(N,{})}),Object(u.jsx)(k.a,{children:Object(u.jsx)("main",{className:"app__main",children:Object(u.jsx)(s.Suspense,{fallback:Object(u.jsx)(w.a,{}),children:Object(u.jsxs)(i.d,{children:[Object(u.jsx)(i.b,{index:!0,element:Object(u.jsx)(i.a,{to:"home",replace:!0})}),Object(u.jsx)(i.b,{path:"home",element:Object(u.jsx)(q,{})}),Object(u.jsxs)(i.b,{path:"phones",children:[Object(u.jsx)(i.b,{index:!0,element:Object(u.jsx)(M,{category:"phones"})}),Object(u.jsx)(i.b,{path:":productId",element:Object(u.jsx)(P,{})})]}),Object(u.jsxs)(i.b,{path:"tablets",children:[Object(u.jsx)(i.b,{index:!0,element:Object(u.jsx)(M,{category:"tablets"})}),Object(u.jsx)(i.b,{path:":productId",element:Object(u.jsx)(P,{})})]}),Object(u.jsxs)(i.b,{path:"accessories",children:[Object(u.jsx)(i.b,{index:!0,element:Object(u.jsx)(M,{category:"accessories"})}),Object(u.jsx)(i.b,{path:":productId",element:Object(u.jsx)(P,{})})]}),Object(u.jsx)(i.b,{path:"cart",element:Object(u.jsx)(S,{})}),Object(u.jsx)(i.b,{path:"favorites",element:Object(u.jsx)(L,{})}),Object(u.jsx)(i.b,{path:"*",element:Object(u.jsx)(z,{title:"Page not found"})})]})})})}),Object(u.jsx)(I,{})]})})})};c(49);a.a.render(Object(u.jsx)(r.a,{children:Object(u.jsx)(F,{})}),document.getElementById("root"))}],[[50,1,5]]]);
//# sourceMappingURL=main.9ce14f45.chunk.js.map